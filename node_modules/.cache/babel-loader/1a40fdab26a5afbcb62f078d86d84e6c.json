{"ast":null,"code":"var inherits = require('inherits');\n\nvar Reporter = require('../base').Reporter;\n\nvar Buffer = require('buffer').Buffer;\n\nfunction DecoderBuffer(base, options) {\n  Reporter.call(this, options);\n\n  if (!Buffer.isBuffer(base)) {\n    this.error('Input not Buffer');\n    return;\n  }\n\n  this.base = base;\n  this.offset = 0;\n  this.length = base.length;\n}\n\ninherits(DecoderBuffer, Reporter);\nexports.DecoderBuffer = DecoderBuffer;\n\nDecoderBuffer.prototype.save = function save() {\n  return {\n    offset: this.offset,\n    reporter: Reporter.prototype.save.call(this)\n  };\n};\n\nDecoderBuffer.prototype.restore = function restore(save) {\n  // Return skipped data\n  var res = new DecoderBuffer(this.base);\n  res.offset = save.offset;\n  res.length = this.offset;\n  this.offset = save.offset;\n  Reporter.prototype.restore.call(this, save.reporter);\n  return res;\n};\n\nDecoderBuffer.prototype.isEmpty = function isEmpty() {\n  return this.offset === this.length;\n};\n\nDecoderBuffer.prototype.readUInt8 = function readUInt8(fail) {\n  if (this.offset + 1 <= this.length) return this.base.readUInt8(this.offset++, true);else return this.error(fail || 'DecoderBuffer overrun');\n};\n\nDecoderBuffer.prototype.skip = function skip(bytes, fail) {\n  if (!(this.offset + bytes <= this.length)) return this.error(fail || 'DecoderBuffer overrun');\n  var res = new DecoderBuffer(this.base); // Share reporter state\n\n  res._reporterState = this._reporterState;\n  res.offset = this.offset;\n  res.length = this.offset + bytes;\n  this.offset += bytes;\n  return res;\n};\n\nDecoderBuffer.prototype.raw = function raw(save) {\n  return this.base.slice(save ? save.offset : this.offset, this.length);\n};\n\nfunction EncoderBuffer(value, reporter) {\n  if (Array.isArray(value)) {\n    this.length = 0;\n    this.value = value.map(function (item) {\n      if (!(item instanceof EncoderBuffer)) item = new EncoderBuffer(item, reporter);\n      this.length += item.length;\n      return item;\n    }, this);\n  } else if (typeof value === 'number') {\n    if (!(0 <= value && value <= 0xff)) return reporter.error('non-byte EncoderBuffer value');\n    this.value = value;\n    this.length = 1;\n  } else if (typeof value === 'string') {\n    this.value = value;\n    this.length = Buffer.byteLength(value);\n  } else if (Buffer.isBuffer(value)) {\n    this.value = value;\n    this.length = value.length;\n  } else {\n    return reporter.error('Unsupported type: ' + typeof value);\n  }\n}\n\nexports.EncoderBuffer = EncoderBuffer;\n\nEncoderBuffer.prototype.join = function join(out, offset) {\n  if (!out) out = new Buffer(this.length);\n  if (!offset) offset = 0;\n  if (this.length === 0) return out;\n\n  if (Array.isArray(this.value)) {\n    this.value.forEach(function (item) {\n      item.join(out, offset);\n      offset += item.length;\n    });\n  } else {\n    if (typeof this.value === 'number') out[offset] = this.value;else if (typeof this.value === 'string') out.write(this.value, offset);else if (Buffer.isBuffer(this.value)) this.value.copy(out, offset);\n    offset += this.length;\n  }\n\n  return out;\n};","map":{"version":3,"names":["inherits","require","Reporter","Buffer","DecoderBuffer","base","options","call","isBuffer","error","offset","length","exports","prototype","save","reporter","restore","res","isEmpty","readUInt8","fail","skip","bytes","_reporterState","raw","slice","EncoderBuffer","value","Array","isArray","map","item","byteLength","join","out","forEach","write","copy"],"sources":["/Users/zhuyihan/Downloads/patronus/node_modules/asn1.js/lib/asn1/base/buffer.js"],"sourcesContent":["var inherits = require('inherits');\nvar Reporter = require('../base').Reporter;\nvar Buffer = require('buffer').Buffer;\n\nfunction DecoderBuffer(base, options) {\n  Reporter.call(this, options);\n  if (!Buffer.isBuffer(base)) {\n    this.error('Input not Buffer');\n    return;\n  }\n\n  this.base = base;\n  this.offset = 0;\n  this.length = base.length;\n}\ninherits(DecoderBuffer, Reporter);\nexports.DecoderBuffer = DecoderBuffer;\n\nDecoderBuffer.prototype.save = function save() {\n  return { offset: this.offset, reporter: Reporter.prototype.save.call(this) };\n};\n\nDecoderBuffer.prototype.restore = function restore(save) {\n  // Return skipped data\n  var res = new DecoderBuffer(this.base);\n  res.offset = save.offset;\n  res.length = this.offset;\n\n  this.offset = save.offset;\n  Reporter.prototype.restore.call(this, save.reporter);\n\n  return res;\n};\n\nDecoderBuffer.prototype.isEmpty = function isEmpty() {\n  return this.offset === this.length;\n};\n\nDecoderBuffer.prototype.readUInt8 = function readUInt8(fail) {\n  if (this.offset + 1 <= this.length)\n    return this.base.readUInt8(this.offset++, true);\n  else\n    return this.error(fail || 'DecoderBuffer overrun');\n}\n\nDecoderBuffer.prototype.skip = function skip(bytes, fail) {\n  if (!(this.offset + bytes <= this.length))\n    return this.error(fail || 'DecoderBuffer overrun');\n\n  var res = new DecoderBuffer(this.base);\n\n  // Share reporter state\n  res._reporterState = this._reporterState;\n\n  res.offset = this.offset;\n  res.length = this.offset + bytes;\n  this.offset += bytes;\n  return res;\n}\n\nDecoderBuffer.prototype.raw = function raw(save) {\n  return this.base.slice(save ? save.offset : this.offset, this.length);\n}\n\nfunction EncoderBuffer(value, reporter) {\n  if (Array.isArray(value)) {\n    this.length = 0;\n    this.value = value.map(function(item) {\n      if (!(item instanceof EncoderBuffer))\n        item = new EncoderBuffer(item, reporter);\n      this.length += item.length;\n      return item;\n    }, this);\n  } else if (typeof value === 'number') {\n    if (!(0 <= value && value <= 0xff))\n      return reporter.error('non-byte EncoderBuffer value');\n    this.value = value;\n    this.length = 1;\n  } else if (typeof value === 'string') {\n    this.value = value;\n    this.length = Buffer.byteLength(value);\n  } else if (Buffer.isBuffer(value)) {\n    this.value = value;\n    this.length = value.length;\n  } else {\n    return reporter.error('Unsupported type: ' + typeof value);\n  }\n}\nexports.EncoderBuffer = EncoderBuffer;\n\nEncoderBuffer.prototype.join = function join(out, offset) {\n  if (!out)\n    out = new Buffer(this.length);\n  if (!offset)\n    offset = 0;\n\n  if (this.length === 0)\n    return out;\n\n  if (Array.isArray(this.value)) {\n    this.value.forEach(function(item) {\n      item.join(out, offset);\n      offset += item.length;\n    });\n  } else {\n    if (typeof this.value === 'number')\n      out[offset] = this.value;\n    else if (typeof this.value === 'string')\n      out.write(this.value, offset);\n    else if (Buffer.isBuffer(this.value))\n      this.value.copy(out, offset);\n    offset += this.length;\n  }\n\n  return out;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}