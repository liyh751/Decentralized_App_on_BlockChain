{"ast":null,"code":"var _jsxFileName = \"/Users/zhuyihan/Downloads/patronus/src/PatronusDetail.js\";\nimport React, { Component } from 'react';\nimport PatronusPreview from \"./PatronusPreview\";\nimport './static/ZombiePreview.css';\nimport MyWeb3 from './MyWeb3';\nimport moment from \"moment\";\nimport { BrowserRouter as Route, Link } from \"react-router-dom\";\nimport Page from \"./Page\";\n\nclass Patronusdetail extends Component {\n  constructor(props) {\n    super(props);\n    const searchParams = new URLSearchParams(window.location.search);\n    const id = searchParams.get('id');\n    this.state = {\n      id: id,\n      patronus: {},\n      owner: '',\n      patronusFeedTimes: 0,\n      myPrice: 0,\n      minPrice: 0,\n      AttackBtn: () => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 37\n          }\n        });\n      },\n      RenameArea: () => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 38\n          }\n        });\n      },\n      patronusNewname: '',\n      FeedArea: () => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 36\n          }\n        });\n      },\n      LevelupArea: () => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 39\n          }\n        });\n      },\n      SaleArea: () => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 36\n          }\n        });\n      },\n      BuyArea: () => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 35\n          }\n        });\n      },\n      onShop: false,\n      shopInfo: {}\n    };\n    this.patronusChangeName = this.patronusChangeName.bind(this);\n    this.changeName = this.changeName.bind(this);\n    this.feed = this.feed.bind(this);\n    this.levelUp = this.levelUp.bind(this);\n    this.salePatronus = this.salePatronus.bind(this);\n    this.buyShopPatronus = this.buyShopPatronus.bind(this);\n    this.setPrice = this.setPrice.bind(this);\n  }\n\n  componentDidMount() {\n    let that = this;\n    let ethereum = window.ethereum;\n\n    if (typeof ethereum !== 'undefined' || typeof window.web3 !== 'undefined') {\n      MyWeb3.init().then(function (res) {\n        that.getPatronus(that.state.id);\n        that.getPatronusFeedTimes(that.state.id);\n        that.getMinPrice();\n        that.getPatronusShop(that.state.id);\n      });\n    } else {\n      alert('You have to install MetaMask !');\n    }\n  }\n\n  getPatronusShop(patronusId) {\n    let that = this;\n    MyWeb3.patronusShop(patronusId).then(function (shopInfo) {\n      if (shopInfo.price > 0) {\n        that.setState({\n          onShop: true,\n          shopInfo: shopInfo\n        });\n      }\n    });\n  }\n\n  getMinPrice() {\n    let that = this;\n    MyWeb3.minPrice().then(function (minPrice) {\n      if (minPrice > 0) {\n        MyWeb3.tax().then(function (tax) {\n          if (tax > 0) {\n            that.setState({\n              myPrice: parseFloat(minPrice) + parseFloat(tax),\n              minPrice: parseFloat(minPrice) + parseFloat(tax)\n            });\n          }\n        });\n      }\n    });\n  }\n\n  getPatronusFeedTimes(patronusId) {\n    let that = this;\n    MyWeb3.patronusFeedTimes(patronusId).then(function (result) {\n      if (result > 0) {\n        that.setState({\n          patronusFeedTimes: result\n        });\n      }\n    });\n  }\n\n  setPrice(event) {\n    this.setState({\n      myPrice: event.target.value\n    });\n  }\n\n  patronusChangeName(event) {\n    this.setState({\n      patronusNewname: event.target.value\n    });\n  }\n\n  changeName() {\n    let that = this;\n\n    if (window.defaultAccount !== undefined) {\n      MyWeb3.changeName(this.state.id, this.state.patronusNewname).then(function (transactionHash) {\n        that.setState({\n          RenameArea: () => {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 28\n              }\n            }, transactionHash);\n          }\n        });\n      });\n    }\n  }\n\n  feed() {\n    let that = this;\n\n    if (window.defaultAccount !== undefined) {\n      MyWeb3.feed(this.state.id).then(function (transactionHash) {\n        that.setState({\n          FeedArea: () => {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 28\n              }\n            }, transactionHash);\n          }\n        });\n      });\n    }\n  }\n\n  levelUp() {\n    let that = this;\n\n    if (window.defaultAccount !== undefined) {\n      MyWeb3.levelUp(this.state.id).then(function (transactionHash) {\n        that.setState({\n          LevelupArea: () => {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 28\n              }\n            }, transactionHash);\n          }\n        });\n      });\n    }\n  }\n\n  salePatronus() {\n    let that = this;\n\n    if (window.defaultAccount !== undefined && this.state.myPrice * this.state.minPrice > 0 && this.state.myPrice >= this.state.minPrice) {\n      MyWeb3.saleMyPatronus(this.state.id, this.state.myPrice).then(function (transactionHash) {\n        that.setState({\n          SaleArea: () => {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 28\n              }\n            }, transactionHash);\n          }\n        });\n      });\n    }\n  }\n\n  buyShopPatronus() {\n    let that = this;\n\n    if (window.defaultAccount !== undefined) {\n      MyWeb3.buyShopPatronus(this.state.id, this.state.shopInfo.price).then(function (transactionHash) {\n        that.setState({\n          BuyArea: () => {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 28\n              }\n            }, transactionHash);\n          }\n        });\n      });\n    }\n  }\n\n  getPatronus(patronusId) {\n    let that = this;\n    MyWeb3.patronuss(patronusId).then(function (result) {\n      that.setState({\n        patronus: result\n      });\n      that.setState({\n        patronusNewname: result.name\n      });\n      MyWeb3.patronusToOwner(patronusId).then(function (patronusOwner) {\n        that.setState({\n          owner: patronusOwner\n        }); //  if user is not the owner of current patronus, then show attack button\n\n        if (window.defaultAccount !== undefined && patronusOwner !== window.defaultAccount) {\n          that.setState({\n            AttackBtn: () => {\n              return /*#__PURE__*/React.createElement(\"button\", {\n                className: \"attack-btn\",\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 25\n                }\n              }, /*#__PURE__*/React.createElement(\"span\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 29\n                }\n              }, /*#__PURE__*/React.createElement(Link, {\n                to: `?PatronusFriend&id=` + that.state.id,\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 33\n                }\n              }, \"make friend\")));\n            }\n          }); //ðŸ“Œ if current patronus is in shop that can be bought, show buy \n\n          if (that.state.onShop) {\n            that.setState({\n              BuyArea: () => {\n                return /*#__PURE__*/React.createElement(\"div\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 33\n                  }\n                }, /*#__PURE__*/React.createElement(\"div\", {\n                  className: \"zombieInput\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 189,\n                    columnNumber: 37\n                  }\n                }, \"cost: \", that.state.shopInfo.price, \" ether\"), /*#__PURE__*/React.createElement(\"div\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 37\n                  }\n                }, /*#__PURE__*/React.createElement(\"button\", {\n                  className: \"pay-btn pay-btn-last\",\n                  onClick: that.buyShopPatronus,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 41\n                  }\n                }, /*#__PURE__*/React.createElement(\"span\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 45\n                  }\n                }, \"Buy It\"))));\n              }\n            });\n          } //  if user is owner of current patronus \n\n        } else {\n          that.setState({\n            AttackBtn: () => {\n              return /*#__PURE__*/React.createElement(\"div\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 61\n                }\n              });\n            }\n          }); //ðŸ“Œ  if current patronus level is higher than 1, you are able to change name\n\n          if (that.state.patronus.level > 1) {\n            that.setState({\n              RenameArea: () => {\n                return /*#__PURE__*/React.createElement(\"div\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 33\n                  }\n                }, /*#__PURE__*/React.createElement(\"div\", {\n                  className: \"zombieInput\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 37\n                  }\n                }, /*#__PURE__*/React.createElement(\"input\", {\n                  type: \"text\",\n                  id: \"patronusName\",\n                  placeholder: that.state.patronus.name,\n                  value: that.state.patronusNewname,\n                  onChange: that.patronusChangeName,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 41\n                  }\n                })), /*#__PURE__*/React.createElement(\"div\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 221,\n                    columnNumber: 37\n                  }\n                }, /*#__PURE__*/React.createElement(\"button\", {\n                  className: \"pay-btn pay-btn-last\",\n                  onClick: that.changeName,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 41\n                  }\n                }, /*#__PURE__*/React.createElement(\"span\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 45\n                  }\n                }, \"Change Name\"))));\n              }\n            });\n          } //ðŸ“Œ  if patronus is ready, you can feed it \n\n\n          if (that.state.patronus.readyTime === 0 || moment().format('X') > that.state.patronus.readyTime) {\n            that.setState({\n              FeedArea: () => {\n                return /*#__PURE__*/React.createElement(\"div\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 33\n                  }\n                }, /*#__PURE__*/React.createElement(\"button\", {\n                  className: \"pay-btn\",\n                  onClick: that.feed,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 37\n                  }\n                }, /*#__PURE__*/React.createElement(\"span\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 41\n                  }\n                }, \"Feed\")));\n              }\n            });\n          } // click to upgrage\n\n\n          that.setState({\n            LevelupArea: () => {\n              return /*#__PURE__*/React.createElement(\"div\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 29\n                }\n              }, /*#__PURE__*/React.createElement(\"button\", {\n                className: \"pay-btn\",\n                onClick: that.levelUp,\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 33\n                }\n              }, /*#__PURE__*/React.createElement(\"span\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 37\n                }\n              }, \"Pay to Upgrade\")));\n            }\n          }); //  if patronus is not on shop, you can have a sell button to sell it \n\n          if (!that.state.onShop) {\n            that.setState({\n              SaleArea: () => {\n                return /*#__PURE__*/React.createElement(\"div\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 33\n                  }\n                }, /*#__PURE__*/React.createElement(\"div\", {\n                  className: \"zombieInput\",\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 37\n                  }\n                }, /*#__PURE__*/React.createElement(\"input\", {\n                  type: \"text\",\n                  id: \"salePrice\",\n                  placeholder: that.state.minPrice,\n                  value: that.state.myPrice,\n                  onChange: that.setPrice,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 41\n                  }\n                })), /*#__PURE__*/React.createElement(\"div\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 37\n                  }\n                }, /*#__PURE__*/React.createElement(\"button\", {\n                  className: \"pay-btn pay-btn-last\",\n                  onClick: that.salePatronus,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 41\n                  }\n                }, /*#__PURE__*/React.createElement(\"span\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 274,\n                    columnNumber: 45\n                  }\n                }, \"Sell It\"))));\n              }\n            });\n          }\n        }\n      });\n    });\n  }\n\n  render() {\n    var readyTime = 'Ready';\n\n    if (this.state.patronus.readyTime !== undefined && moment().format('X') < this.state.patronus.readyTime) {\n      readyTime = moment(parseInt(this.state.patronus.readyTime) * 1000).format('YYYY-MM-DD');\n    }\n\n    var AttackBtn = this.state.AttackBtn;\n    var RenameArea = this.state.RenameArea;\n    var FeedArea = this.state.FeedArea;\n    var LevelupArea = this.state.LevelupArea;\n    var SaleArea = this.state.SaleArea;\n    var BuyArea = this.state.BuyArea;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row zombie-parts-bin-component\",\n      authenticated: \"true\",\n      lesson: \"1\",\n      lessonidx: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"zombie-preview\",\n      id: \"zombie-preview\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"zombie-char\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"zombie-loading zombie-parts\",\n      style: {\n        display: \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(PatronusPreview, {\n      patronus: this.state.patronus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"hide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header bg-dark hide-overflow-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"small\", {\n      className: \"hide-overflow-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 33\n      }\n    }, \"level 1\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"zombie-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"dl\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"dt\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 29\n      }\n    }, this.state.patronus.name), /*#__PURE__*/React.createElement(\"dt\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 29\n      }\n    }, \"Master\"), /*#__PURE__*/React.createElement(\"dd\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 29\n      }\n    }, this.state.owner), /*#__PURE__*/React.createElement(\"dt\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 29\n      }\n    }, \"Level\"), /*#__PURE__*/React.createElement(\"dd\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 29\n      }\n    }, this.state.patronus.level), /*#__PURE__*/React.createElement(\"dt\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 29\n      }\n    }, \"Hairball\"), /*#__PURE__*/React.createElement(\"dd\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 29\n      }\n    }, this.state.patronus.hairBall), /*#__PURE__*/React.createElement(\"dt\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 29\n      }\n    }, \"Cool down time\"), /*#__PURE__*/React.createElement(\"dd\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 29\n      }\n    }, readyTime), /*#__PURE__*/React.createElement(\"dt\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 29\n      }\n    }, \"Feeding\"), /*#__PURE__*/React.createElement(\"dd\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 29\n      }\n    }, this.state.patronusFeedTimes), /*#__PURE__*/React.createElement(\"dt\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"dd\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(AttackBtn, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(RenameArea, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(FeedArea, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(LevelupArea, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(SaleArea, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(BuyArea, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 33\n      }\n    })))), /*#__PURE__*/React.createElement(Route, {\n      path: \"*\",\n      component: Page,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default Patronusdetail;","map":{"version":3,"names":["React","Component","PatronusPreview","MyWeb3","moment","BrowserRouter","Route","Link","Page","Patronusdetail","constructor","props","searchParams","URLSearchParams","window","location","search","id","get","state","patronus","owner","patronusFeedTimes","myPrice","minPrice","AttackBtn","RenameArea","patronusNewname","FeedArea","LevelupArea","SaleArea","BuyArea","onShop","shopInfo","patronusChangeName","bind","changeName","feed","levelUp","salePatronus","buyShopPatronus","setPrice","componentDidMount","that","ethereum","web3","init","then","res","getPatronus","getPatronusFeedTimes","getMinPrice","getPatronusShop","alert","patronusId","patronusShop","price","setState","tax","parseFloat","result","event","target","value","defaultAccount","undefined","transactionHash","saleMyPatronus","patronuss","name","patronusToOwner","patronusOwner","level","readyTime","format","render","parseInt","display","hairBall"],"sources":["/Users/zhuyihan/Downloads/patronus/src/PatronusDetail.js"],"sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport PatronusPreview from \"./PatronusPreview\"\r\nimport './static/ZombiePreview.css'\r\nimport MyWeb3 from './MyWeb3'\r\nimport moment from \"moment\"\r\nimport {\r\n    BrowserRouter as \r\n    Route,\r\n    Link\r\n  } from \"react-router-dom\"\r\n  import Page from \"./Page\";\r\n\r\nclass Patronusdetail extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        const searchParams = new URLSearchParams(window.location.search)\r\n        \r\n        const id = searchParams.get('id')   \r\n        this.state = {\r\n            id:id ,\r\n            \r\n            patronus:{},owner:'',\r\n            patronusFeedTimes:0,\r\n\r\n            myPrice:0,\r\n            minPrice:0,\r\n            AttackBtn: () =>{return(<div></div>)}, \r\n            RenameArea: () =>{return(<div></div>)},\r\n            patronusNewname:'',\r\n            FeedArea: () =>{return(<div></div>)},\r\n            LevelupArea: () =>{return(<div></div>)},\r\n            SaleArea: () =>{return(<div></div>)},\r\n            BuyArea: () =>{return(<div></div>)},\r\n            \r\n            onShop:false,\r\n            shopInfo:{}\r\n        }\r\n        this.patronusChangeName = this.patronusChangeName.bind(this)\r\n        this.changeName = this.changeName.bind(this)\r\n        this.feed = this.feed.bind(this)\r\n        this.levelUp = this.levelUp.bind(this)\r\n        this.salePatronus = this.salePatronus.bind(this)\r\n        this.buyShopPatronus = this.buyShopPatronus.bind(this)\r\n        this.setPrice = this.setPrice.bind(this)\r\n    }\r\n     \r\n    componentDidMount(){\r\n        let that = this\r\n        let ethereum = window.ethereum\r\n        if (typeof  ethereum !== 'undefined' || (typeof window.web3 !== 'undefined')) {\r\n            MyWeb3.init().then(function(res){\r\n                that.getPatronus(that.state.id)\r\n                that.getPatronusFeedTimes(that.state.id)\r\n                that.getMinPrice()\r\n                that.getPatronusShop(that.state.id)\r\n            })\r\n        }else {\r\n            alert('You have to install MetaMask !')\r\n        }\r\n    }\r\n    getPatronusShop(patronusId){\r\n        let that = this\r\n        MyWeb3.patronusShop(patronusId).then(function (shopInfo) {\r\n            if(shopInfo.price>0){\r\n                that.setState({onShop:true,shopInfo:shopInfo})\r\n            }\r\n        })\r\n    }\r\n    getMinPrice(){\r\n        let that = this\r\n        MyWeb3.minPrice().then(function (minPrice) {\r\n            if(minPrice>0){\r\n                MyWeb3.tax().then(function (tax) {\r\n                    if(tax>0){\r\n                        that.setState({myPrice:parseFloat(minPrice)+parseFloat(tax),minPrice:parseFloat(minPrice)+parseFloat(tax)})\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n    getPatronusFeedTimes(patronusId){\r\n        let that = this\r\n        MyWeb3.patronusFeedTimes(patronusId).then(function (result) {\r\n            if(result>0){\r\n                that.setState({patronusFeedTimes:result})\r\n            }\r\n        })\r\n    }\r\n    setPrice(event){\r\n        this.setState({\r\n            myPrice:event.target.value\r\n        })\r\n    }\r\n   patronusChangeName(event){\r\n        this.setState({\r\n            patronusNewname:event.target.value\r\n        })\r\n    }\r\n    changeName(){\r\n        let that = this\r\n        if(window.defaultAccount !== undefined){\r\n            MyWeb3.changeName(this.state.id,this.state.patronusNewname)\r\n            .then(function(transactionHash){\r\n                that.setState({RenameArea : () =>{\r\n                    return(<div>{transactionHash}</div>)\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    }\r\n    feed(){\r\n        let that = this\r\n        if(window.defaultAccount !== undefined){\r\n            MyWeb3.feed(this.state.id)\r\n            .then(function(transactionHash){\r\n                that.setState({FeedArea : () =>{\r\n                    return(<div>{transactionHash}</div>)\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    }\r\n    levelUp(){\r\n        let that = this\r\n        if(window.defaultAccount !== undefined){\r\n            MyWeb3.levelUp(this.state.id)\r\n            .then(function(transactionHash){\r\n                that.setState({LevelupArea : () =>{\r\n                    return(<div>{transactionHash}</div>)\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    }\r\n    salePatronus(){\r\n        let that = this\r\n        if(window.defaultAccount !== undefined \r\n            && this.state.myPrice*this.state.minPrice>0 \r\n            && this.state.myPrice>=this.state.minPrice){\r\n            MyWeb3.saleMyPatronus(this.state.id,this.state.myPrice)\r\n            .then(function(transactionHash){\r\n                that.setState({SaleArea : () =>{\r\n                    return(<div>{transactionHash}</div>)\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    }\r\n    buyShopPatronus(){\r\n        let that = this\r\n        if(window.defaultAccount !== undefined){\r\n            MyWeb3.buyShopPatronus(this.state.id,this.state.shopInfo.price)\r\n            .then(function(transactionHash){\r\n                that.setState({BuyArea : () =>{\r\n                    return(<div>{transactionHash}</div>)\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    getPatronus(patronusId){\r\n        let that = this\r\n        MyWeb3.patronuss(patronusId).then(function (result) {\r\n            that.setState({patronus:result})\r\n            that.setState({patronusNewname:result.name})\r\n            MyWeb3.patronusToOwner(patronusId).then(function (patronusOwner) {\r\n                that.setState({owner:patronusOwner})\r\n            \r\n                \r\n//  if user is not the owner of current patronus, then show attack button\r\n                if(window.defaultAccount !== undefined &&\r\n                    patronusOwner !== window.defaultAccount){\r\n                    that.setState({AttackBtn : () =>{\r\n                        return(\r\n                        <button className=\"attack-btn\">\r\n                            <span>\r\n                                <Link to={`?PatronusFriend&id=`+that.state.id} >make friend</Link>\r\n                            </span>\r\n                        </button>)\r\n                        }\r\n                    })\r\n//ðŸ“Œ if current patronus is in shop that can be bought, show buy \r\n                    if(that.state.onShop){\r\n                        that.setState({BuyArea : () =>{\r\n                            return(\r\n                                <div>\r\n                                    <div className='zombieInput'>\r\n                                        cost: {that.state.shopInfo.price} ether\r\n                                    </div>\r\n                                    <div>\r\n                                        <button className=\"pay-btn pay-btn-last\" onClick={that.buyShopPatronus}>\r\n                                            <span>\r\n                                                Buy It\r\n                                            </span>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                                )\r\n                            }\r\n                        })\r\n                    }\r\n//  if user is owner of current patronus \r\n                }else{\r\n                    that.setState({AttackBtn : () =>{return(<div></div>)}})\r\n        //ðŸ“Œ  if current patronus level is higher than 1, you are able to change name\r\n                    if(that.state.patronus.level > 1){\r\n                        that.setState({RenameArea : () =>{\r\n                            return(\r\n                                <div>\r\n                                    <div className='zombieInput'>\r\n                                        <input \r\n                                            type=\"text\" \r\n                                            id='patronusName' \r\n                                            placeholder={that.state.patronus.name} \r\n                                            value={that.state.patronusNewname}\r\n                                            onChange={that.patronusChangeName}>\r\n                                        </input>\r\n                                    </div>\r\n                                    <div>\r\n                                        <button className=\"pay-btn pay-btn-last\" onClick={that.changeName}>\r\n                                            <span>\r\n                                                Change Name\r\n                                            </span>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>)\r\n                            }\r\n                        })\r\n                    }\r\n        //ðŸ“Œ  if patronus is ready, you can feed it \r\n                    if(that.state.patronus.readyTime === 0 || moment().format('X')>that.state.patronus.readyTime){\r\n                        that.setState({FeedArea : () =>{\r\n                            return(\r\n                                <div>\r\n                                    <button className=\"pay-btn\" onClick={that.feed}>\r\n                                        <span>\r\n                                            Feed\r\n                                        </span>\r\n                                    </button>\r\n                                </div>)\r\n                            }\r\n                        })\r\n                    }\r\n    // click to upgrage\r\n                    that.setState({LevelupArea : () =>{\r\n                        return(\r\n                            <div>\r\n                                <button className=\"pay-btn\" onClick={that.levelUp}>\r\n                                    <span>\r\n                                        Pay to Upgrade\r\n                                    </span>\r\n                                </button>\r\n                            </div>)\r\n                        }\r\n                    })\r\n    //  if patronus is not on shop, you can have a sell button to sell it \r\n                    if(!that.state.onShop){\r\n                        that.setState({SaleArea : () =>{\r\n                            return(\r\n                                <div>\r\n                                    <div className='zombieInput'>\r\n                                        <input \r\n                                            type=\"text\" \r\n                                            id='salePrice' \r\n                                            placeholder={that.state.minPrice} \r\n                                            value={that.state.myPrice}\r\n                                            onChange={that.setPrice}>\r\n                                        </input>\r\n                                    </div>\r\n                                    <div>\r\n                                        <button className=\"pay-btn pay-btn-last\" onClick={that.salePatronus}>\r\n                                            <span>\r\n                                                Sell It\r\n                                            </span>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                                )\r\n                            }\r\n                        })\r\n                    }\r\n                } \r\n            })\r\n        })\r\n    }\r\n\r\n    render() { \r\n        var readyTime = 'Ready'                                \r\n        if(this.state.patronus.readyTime !== undefined && moment().format('X')<this.state.patronus.readyTime){\r\n            readyTime = moment(parseInt(this.state.patronus.readyTime)*1000).format('YYYY-MM-DD')\r\n        }\r\n        var AttackBtn = this.state.AttackBtn\r\n        var RenameArea = this.state.RenameArea\r\n        var FeedArea = this.state.FeedArea\r\n        var LevelupArea = this.state.LevelupArea\r\n        var SaleArea = this.state.SaleArea\r\n        var BuyArea = this.state.BuyArea\r\n        return ( \r\n            <div className=\"App\">\r\n                <div  className=\"row zombie-parts-bin-component\" authenticated=\"true\" lesson=\"1\" lessonidx=\"1\">\r\n                    <div  className=\"zombie-preview\" id=\"zombie-preview\">\r\n                        <div className=\"zombie-char\">\r\n                            <div className=\"zombie-loading zombie-parts\" style={{display:\"none\"}}></div>\r\n                                <PatronusPreview patronus={this.state.patronus}></PatronusPreview>\r\n                            <div className=\"hide\">\r\n                                <div className=\"card-header bg-dark hide-overflow-text\">\r\n                                    <strong ></strong></div>\r\n                                <small className=\"hide-overflow-text\">level 1</small>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"zombie-detail\">\r\n                        <dl>\r\n                            <dt>{this.state.patronus.name}</dt>\r\n                            <dt>Master</dt>\r\n                            <dd>{this.state.owner}</dd>\r\n                            <dt>Level</dt>\r\n                            <dd>{this.state.patronus.level}</dd>\r\n                            {/* <dt>Victory</dt>\r\n                            <dd>{this.state.patronus.winCount}</dd> */}\r\n                            <dt>Hairball</dt>\r\n                            <dd>{this.state.patronus.hairBall}</dd>\r\n                            <dt>Cool down time</dt>\r\n                            <dd>{readyTime}</dd>\r\n                            <dt>Feeding</dt>\r\n                            <dd>{this.state.patronusFeedTimes}</dd>\r\n                            <dt></dt>\r\n                            <dd>\r\n                                <AttackBtn></AttackBtn>\r\n                                <RenameArea></RenameArea>\r\n                                <FeedArea></FeedArea>\r\n                                <LevelupArea></LevelupArea>\r\n                                <SaleArea></SaleArea>\r\n                                <BuyArea></BuyArea>\r\n                            </dd>\r\n                        </dl>\r\n                    </div>\r\n                    <Route path=\"*\" component={Page}></Route>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Patronusdetail;"],"mappings":"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"},"metadata":{},"sourceType":"module"}