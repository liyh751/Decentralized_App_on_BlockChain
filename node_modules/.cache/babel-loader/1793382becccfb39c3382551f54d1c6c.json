{"ast":null,"code":"var _jsxFileName = \"/Users/zhuyihan/Downloads/patronus/src/PatronusMarket.js\";\nimport React, { Component } from 'react';\nimport MyWeb3 from './MyWeb3';\nimport PatronusCard from \"./PatronusCard\";\nimport { BrowserRouter as Route, Link } from \"react-router-dom\";\nimport Page from \"./Page\";\n\nclass PatronusMarket extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shopPatronuss: []\n    };\n  }\n\n  componentDidMount() {\n    //console.log(window.web3._extend.utils)\n    let that = this;\n    let ethereum = window.ethereum;\n\n    if (typeof ethereum !== 'undefined' || typeof window.web3 !== 'undefined') {\n      MyWeb3.init().then(function (res) {\n        that.patronusShop();\n      });\n    } else {\n      alert('You have to install MetaMask !');\n    }\n  }\n\n  patronusShop() {\n    let that = this;\n    MyWeb3.getShopPatronuss().then(function (patronusIds) {\n      if (patronusIds.length > 0) {\n        for (var i = 0; i < patronusIds.length; i++) {\n          let patronusId = patronusIds[i];\n\n          if (patronusId >= 0) {\n            MyWeb3.patronuss(patronusId).then(function (patronuss) {\n              let _shopPatronuss = that.state.shopPatronuss;\n              patronuss.patronusId = patronusId;\n\n              _shopPatronuss.push(patronuss);\n\n              that.setState({\n                shopPatronuss: _shopPatronuss\n              });\n            });\n          }\n        }\n      }\n    });\n  }\n\n  render() {\n    if (this.state.shopPatronuss.length > 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cards\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 17\n        }\n      }, this.state.shopPatronuss.map((item, index) => {\n        var name = item.name;\n        var level = item.level;\n        return /*#__PURE__*/React.createElement(Link, {\n          to: `?PatronusDetail&id=` + item.patronusId,\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(PatronusCard, {\n          patronus: item,\n          name: name,\n          level: level,\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 33\n          }\n        }));\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"*\",\n        component: Page,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 22\n        }\n      });\n    }\n  }\n\n}\n\nexport default PatronusMarket;","map":{"version":3,"names":["React","Component","MyWeb3","PatronusCard","BrowserRouter","Route","Link","Page","PatronusMarket","constructor","props","state","shopPatronuss","componentDidMount","that","ethereum","window","web3","init","then","res","patronusShop","alert","getShopPatronuss","patronusIds","length","i","patronusId","patronuss","_shopPatronuss","push","setState","render","map","item","index","name","level"],"sources":["/Users/zhuyihan/Downloads/patronus/src/PatronusMarket.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport MyWeb3 from './MyWeb3'\r\nimport PatronusCard from \"./PatronusCard\";\r\nimport {\r\n    BrowserRouter as \r\n    Route,\r\n    Link\r\n  } from \"react-router-dom\"\r\nimport Page from \"./Page\";\r\n\r\nclass PatronusMarket extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {shopPatronuss:[]  }\r\n    }\r\n     \r\n    componentDidMount(){\r\n        //console.log(window.web3._extend.utils)\r\n        let that = this\r\n        let ethereum = window.ethereum\r\n        if (typeof ethereum !== 'undefined' || (typeof window.web3 !== 'undefined')) {\r\n            MyWeb3.init().then(function(res){\r\n                that.patronusShop()\r\n            })\r\n        }else {\r\n            alert('You have to install MetaMask !')\r\n        }\r\n    }\r\n\r\n    patronusShop(){\r\n        let that = this\r\n        MyWeb3.getShopPatronuss().then(function(patronusIds){\r\n            if(patronusIds.length>0){\r\n                for(var i=0;i<patronusIds.length;i++){\r\n                    let patronusId = patronusIds[i]\r\n                    if(patronusId>=0){\r\n                        MyWeb3.patronuss(patronusId).then(function(patronuss) {\r\n                            let _shopPatronuss = that.state.shopPatronuss\r\n                            patronuss.patronusId = patronusId\r\n                            _shopPatronuss.push(patronuss);\r\n                            that.setState({shopPatronuss:_shopPatronuss})\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n    \r\n    render() { \r\n        if(this.state.shopPatronuss.length>0) {\r\n            return ( \r\n                <div className=\"cards\">\r\n                    {this.state.shopPatronuss.map((item,index)=>{\r\n                        var name = item.name\r\n                        var level = item.level\r\n                        return(\r\n                            <Link to={`?PatronusDetail&id=`+item.patronusId} key={index}>\r\n                                <PatronusCard patronus={item} name={name} level={level} key={index}></PatronusCard>\r\n                            </Link>\r\n                        )\r\n                    })}\r\n                    <Route path=\"*\" component={Page}></Route>\r\n                </div> \r\n            )\r\n        }else{\r\n            return ( <div></div>)\r\n        }\r\n    }\r\n}\r\n \r\nexport default PatronusMarket;"],"mappings":"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"},"metadata":{},"sourceType":"module"}